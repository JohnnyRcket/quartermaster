<div [attr.data-bs-theme]="themeService.getCurrentTheme()" class="d-flex flex-column" style="height: 100dvh;">
  <!-- Header -->
  <header class="py-1 border-bottom bg-body position-sticky top-0 z-3">
    <div class="container">
      <app-error-toast></app-error-toast>
      <h1 class="text-center text-danger"
          style="text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.4); margin-bottom: -1px; font-weight: bold; font-style: italic; text-decoration: underline;">
        Quartermaster
        <span class="fs-6 align-bottom text-danger ms-2">(BETA)</span>
        <span class="align-bottom text-danger ms-1"
              style="font-size: small"
              [tooltip]="versionTooltip"
              container="body"
              placement="top">
          v0.4</span>
      </h1>
      <ng-template #versionTooltip>
        <div class="text-start">
          <strong>Version 0.4</strong><br>
          • Persistent header/footer<br>
          • Changelog on hover on version number<br>
          • Consolidated wipe and reset into modal<br>
          • Consistency tweaks
        </div>
      </ng-template>
    </div>
  </header>

  <!-- Main Content -->
  <main class="flex-fill overflow-auto" style="min-height: 0;" >
    <div class="container py-3 h-100 position-relative" id="main-content-box">
      <div class="row h-100" cdkDropListGroup>
        <!-- Characters -->
        <div class="col-12 col-md-4" id="characterColumn">
          <div class="d-flex justify-content-between align-items-center">
            <span class="fancy-header flex-grow-1 text-center">Characters</span>
            <button class="btn btn-secondary btn-sm" (click)="openCharacterModal()">New</button>
          </div>
          <div *ngFor="let character of json.activeInventory.characters; let i = index">
            <app-carrier [carrier]="character"></app-carrier>
          </div>
        </div>

        <!-- Animals -->
        <div class="col-12 col-md-4" id="animalColumn">
          <div class="d-flex justify-content-between align-items-center">
            <span class="fancy-header flex-grow-1 text-center">Animals</span>
            <button class="btn btn-secondary btn-sm" (click)="openAnimalModal()">New</button>
          </div>
          <div *ngFor="let animal of json.activeInventory.animals; let i = index">
            <app-carrier [carrier]="animal"></app-carrier>
          </div>
        </div>

        <!-- Toolbox -->
        <div class="col-12 col-md-4">
          <div class="d-flex justify-content-between align-items-center">
            <span class="fancy-header flex-grow-1 text-center">Toolbox</span>
          </div>
          <div style="position: sticky; top: 1rem; z-index: 10;">
            <app-toolbox></app-toolbox>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="d-flex flex-wrap align-items-center justify-content-center justify-content-sm-between gap-2 px-2 py-2 border-top small bg-body">
    <div class="container d-flex flex-wrap justify-content-center align-items-center">
      <div class="d-flex flex-wrap gap-2 justify-content-center">
        <app-theme-switcher></app-theme-switcher>
        <button class="btn btn-secondary btn-sm" type="button" (click)="openImportModal()">Import...</button>
        <button class="btn btn-secondary btn-sm" type="button" (click)="openExportModal()">Export...</button>
        <button class="btn btn-danger btn-sm" type="button" (click)="wipeData()">Clear All</button>
      </div>

      <!-- Ko-fi Link with margin on desktop -->
      <div class="d-flex justify-content-center align-items-center mt-2 mt-sm-0" style="margin-left: 20px;">
        <a class="text-center" href="https://ko-fi.com/bizentine" target="_blank" rel="noopener noreferrer"
           style="font-size: 15px; white-space: nowrap; flex-shrink: 0;">
          Ko-fi.com/bizentine
        </a>
      </div>
    </div>
  </footer>







</div>





