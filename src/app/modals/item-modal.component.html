<div class="modal-content">
  <div class="modal-header d-flex flex-wrap align-items-center justify-content-between">
    <h4 class="modal-title mb-0" id="itemModalLabel">{{ title }}</h4>

    <div class="d-flex align-items-center">
      <label class="form-label me-2 mb-0">Item Template:</label>
      <ng-container *ngIf="dropdownReady">
      <ngx-select-dropdown
        [config]="{
        displayKey: 'name',
        search: true,
        placeholder: 'Select item'}"
        [options]="itemList"

        (change)="onItemSelected($event)"
        bindLabel="name"
        class="custom-dropdown">
        <ng-template let-item="item" ngx-select-dropdown-option>
          {{ item.name }}
        </ng-template>
      </ngx-select-dropdown>
      </ng-container>

      <style>
        .custom-dropdown {
          min-width: 200px;
          max-width: 300px;
        }

        .custom-dropdown .ngx-select-dropdown-list {
          position: absolute !important;
          z-index: 1060 !important;
          background-color: white !important;
          min-width: 200px !important;
          max-width: 300px !important;
          border: 1px solid #dee2e6 !important;
          box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
        }

        .custom-dropdown .ngx-select-dropdown-list .ngx-dropdown-list-item {
          padding: 0.5rem 1rem;
        }

        .custom-dropdown .ngx-select-dropdown-list .ngx-dropdown-list-item:hover {
          background-color: #f8f9fa;
        }
      </style>

      <button
        class="btn-close"
        type="button"
        aria-label="Close"
        (click)="close()">
      </button>
    </div>
  </div>

  <div class="modal-body">
    <div class="d-flex flex-wrap align-items-end mb-3 gap-3">
      <div class="flex-fill">
        <label for="itemName" class="form-label mb-1">Name:</label>
        <input #formInput
          class="form-control"
          type="text"
          [(ngModel)]="bufferItem.name" (keydown.enter)="onEnter($event)"
          id="itemName"
          style="background-color: white;">
      </div>
      <div class="flex-fill">
        <label for="itemSize" class="form-label mb-1">Size:</label>
        <input #formInput class="form-control"
               type="number" inputmode="numeric"
               pattern="[0-9]*" min="0" step="1"
               (keydown)="filterDigitsOnly($event)"
          [(ngModel)]="bufferItem.size" (keydown.enter)="onEnter($event)"
          id="itemSize"
          style="background-color: white;">
      </div>
      <div class="flex-fill" *ngIf="isContainer">
        <label for="itemCapacity" class="form-label mb-1">Capacity:</label>
        <input #formInput class="form-control"
               type="number" inputmode="numeric"
               pattern="[0-9]*" min="0" step="1"
               (keydown)="filterDigitsOnly($event)"
          [(ngModel)]="containerItem.capacity" (keydown.enter)="onEnter($event)"
          id="itemCapacity"
          style="background-color: white;">
      </div>
    </div>

    <div class="mb-3">
      <label for="itemDescription" class="form-label">Description:</label>
      <textarea #formInput
        class="form-control"
        rows="4"
        [(ngModel)]="bufferItem.description" (keydown.enter)="onEnter($event)"
        id="itemDescription"
        style="background-color: white;"></textarea>
    </div>
  </div>

  <div class="modal-footer justify-content-center">
    <button class="btn btn-secondary" type="button" (click)="saveItem()">Save</button>
    <button class="btn btn-secondary" type="button" (click)="deleteItem()">{{ delete }}</button>
    <button class="btn btn-secondary" type="button" (click)="close()">Close</button>
  </div>
</div>
